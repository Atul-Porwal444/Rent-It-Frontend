<div class="auth-wrapper d-flex align-items-center justify-content-center">
  <div class="auth-card p-4 p-sm-5 rounded-4 shadow-lg text-center">
    
    <div class="mb-4">
      <div class="mx-auto d-flex align-items-center justify-content-center rounded-circle mb-3" 
           style="width: 70px; height: 70px; background-color: rgba(13, 110, 253, 0.15); color: #6ea8fe;">
        <i class="bi bi-envelope-check-fill" style="font-size: 2rem;"></i>
      </div>
      <h3 class="fw-bold text-white mt-2">Verify Your Email</h3>
      <p class="text-secondary small">
        We have sent a 6-digit code to <br> 
        <span class="fw-bold text-white">{{ form.email || 'your email' }}</span>
      </p>
    </div>

    <div *ngIf="isVerified" class="alert alert-success bg-success bg-opacity-10 border-success border-opacity-25 text-success py-2 mb-4 d-flex justify-content-center align-items-center small fw-medium">
      <i class="bi bi-check-circle-fill me-2"></i> Account Verified! Redirecting...
    </div>

    <form *ngIf="!isVerified" (ngSubmit)="onSubmit()">
      
      <div class="mb-4">
        <input 
          type="text" 
          class="form-control custom-auth-input text-center fw-bold letter-spacing-2" 
          [(ngModel)]="form.otp" 
          name="otp" 
          placeholder="• • • • • •" 
          maxlength="6"
          required>
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger bg-danger bg-opacity-10 border-danger border-opacity-25 text-danger py-2 small mb-3">
        {{ errorMessage }}
      </div>

      <div class="d-grid">
        <button 
          type="submit" 
          class="btn btn-primary primary-btn fw-bold py-2" 
          [disabled]="isLoading || !form.otp || form.otp.length < 6"> 
          <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          <span *ngIf="isLoading">Verifying...</span>
          <span *ngIf="!isLoading">Verify Code</span>
        </button>
      </div>

    </form>

    <div class="mt-4">
      <p class="text-secondary small mb-2">Didn't receive the code?</p>
      
      <button 
        class="btn btn-link text-decoration-none fw-medium p-0" 
        (click)="onResend()" 
        [disabled]="isResending || countdown > 0"
        [ngClass]="countdown > 0 ? 'text-secondary' : 'text-white'">
        
        <span *ngIf="isResending" class="spinner-border spinner-border-sm me-1"></span>
        
        <ng-container *ngIf="!isResending">
          {{ countdown > 0 ? 'Resend in ' + countdown + 's' : 'Resend OTP' }}
        </ng-container>
        <ng-container *ngIf="isResending">Sending...</ng-container>

      </button>
    
      <div *ngIf="resendMessage" class="small mt-2 fw-medium" 
           [ngClass]="resendMessage.includes('sent') ? 'text-success' : 'text-danger'">
        {{ resendMessage }}
      </div>
    </div>

  </div>
</div>