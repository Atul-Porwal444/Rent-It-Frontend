<nav class="navbar navbar-expand-lg px-4 py-2 custom-navbar">
  <div class="container-fluid">
    
    <a class="navbar-brand fw-bold fs-4 text-white" routerLink="/">RentIt</a>

    <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav align-items-center gap-3">
        
        <li class="nav-item">
          <a class="nav-link custom-link" routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link custom-link" routerLink="/rooms" routerLinkActive="active-link">Find Rooms</a>
        </li>
        <li class="nav-item">
          <a class="nav-link custom-link" routerLink="/roommates" routerLinkActive="active-link">Find Roommates</a>
        </li>

        <div class="d-none d-lg-block border-end border-secondary mx-2" style="height: 20px;"></div>

        <li class="nav-item">
          <button class="btn d-flex align-items-center gap-2 custom-btn-outline" (click)="openPostModal('room')">
            <i class="bi bi-house-add"></i> 
            <span class="d-none d-lg-inline">Post Room</span> 
          </button>
        </li>
      
        <li class="nav-item">
          <button class="btn d-flex align-items-center gap-2 custom-btn-filled" (click)="openPostModal('roommate')">
            <i class="bi bi-people"></i>
            <span class="d-none d-lg-inline">Post Roommate</span>
          </button>
        </li>
      
        <app-post-ad 
          *ngIf="showPostModal" 
          [adType]="currentAdType" 
          (close)="showPostModal = false">
        </app-post-ad>

        <li class="nav-item dropdown ms-lg-2" *ngIf="authService.isLoggedIn(); else loginBtn">
          
          <a class="nav-link p-0 d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <img 
              [src]="userImage" 
              alt="Profile" 
              class="profile-icon rounded-circle shadow-sm">
          </a>
        
          <div class="dropdown-menu dropdown-menu-end custom-dropdown shadow-lg border-0 p-3">
            
            <div class="d-flex align-items-center mb-3 px-1">
              <img 
                [src]="userImage" 
                alt="User" 
                class="rounded-circle me-3" 
                style="width: 45px; height: 45px; object-fit: cover;">
              
              <div class="d-flex flex-column justify-content-center">
                <h6 class="text-white fw-bold mb-0" style="font-size: 0.9rem;">{{ userName }}</h6>
                <small class="text-secondary" style="font-size: 0.7rem;">RentIt Member</small>
              </div>
            </div>
        
            <div class="grid-menu mb-3">
              <a routerLink="/profile" class="grid-item text-decoration-none">
                <div class="icon-circle bg-black text-light border border-primary">
                  <i class="bi bi-person-vcard text-primary"></i>
                </div>
                <span>Profile</span>
              </a>

              <a routerLink="/my-posts" class="grid-item text-decoration-none">
                <div class="icon-circle bg-black text-success">
                  <i class="bi bi-collection"></i>
                </div>
                <span>My Posts</span>
              </a>
        
              <a routerLink="/saved-posts" class="grid-item text-decoration-none">
                <div class="icon-circle bg-black text-light border border-danger">
                  <i class="bi bi-heart-fill text-danger"></i>
                </div>
                <span>Saved</span>
              </a>
        
              <a routerLink="/settings" class="grid-item text-decoration-none">
                <div class="icon-circle bg-black text-light border border-warning">
                  <i class="bi bi-gear text-warning"></i>
                </div>
                <span>Settings</span>
              </a>
            </div>
        
            <hr class="dropdown-divider bg-secondary opacity-25 mb-2">
        
            <ul class="list-unstyled mb-0">
              <li>
                <button class="dropdown-item list-btn d-flex align-items-center rounded-2 py-2 text-danger-hover" (click)="logout()">
                  <i class="bi bi-box-arrow-right me-3 fs-6 text-secondary"></i>
                  <span class="text-white-50" style="font-size: 0.85rem;">Sign Out</span>
                </button>
              </li>
            </ul>
        
          </div>
        </li>

        <ng-template #loginBtn>
          <li class="nav-item ms-lg-2">
            <button class="btn custom-btn-filled fw-medium px-4" routerLink="/login">Login</button>
          </li>
        </ng-template>

      </ul>
    </div>
  </div>
</nav>