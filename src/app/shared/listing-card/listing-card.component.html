<div class="custom-card h-100" (click)="handleClick()">
  
  <div class="card-img-wrapper position-relative">
    <img [src]="currentImage" class="card-img-top" alt="Listing">
    
    <div class="type-badge">
      {{ type === 'ROOM' ? 'Room' : 'Roommate' }}
    </div>

    <button *ngIf="data?.imageUrls?.length > 1 && currentImageIndex > 0" 
            class="btn img-nav-btn position-absolute top-50 start-0 translate-middle-y ms-1"
            (click)="prevImage($event)">
      <i class="bi bi-chevron-left"></i>
    </button>
    
    <button *ngIf="data?.imageUrls?.length > 1 && currentImageIndex < data.imageUrls.length - 1" 
            class="btn img-nav-btn position-absolute top-50 end-0 translate-middle-y me-1"
            (click)="nextImage($event)">
      <i class="bi bi-chevron-right"></i>
    </button>
    
    <div *ngIf="data?.imageUrls?.length > 1" class="position-absolute bottom-0 start-50 translate-middle-x mb-2 d-flex gap-1">
      <div *ngFor="let img of data.imageUrls; let i = index" 
           class="img-indicator" [class.active]="i === currentImageIndex"></div>
    </div>
  </div>

  <div class="card-body p-3 d-flex flex-column">
    <div class="d-flex justify-content-between align-items-start mb-2">
      <h5 class="fw-bold text-white mb-0" style="font-size: 1.1rem;">
        ₹{{ data.rentAmount || '0' }}
        <span class="text-secondary fw-normal" style="font-size: 0.75rem;">/mo</span>
      </h5>
      <span class="custom-badge"><i class="bi bi-geo-alt me-1"></i>{{ data.city || 'Location' }}</span>
    </div>
    
    <p class="card-text text-secondary mt-1 mb-3 text-truncate-2" style="font-size: 0.8rem; line-height: 1.5;">
      {{ data.description || 'No description provided.' }}
    </p>

    <div class="mt-auto"></div>

    <div class="pt-3 border-top custom-border-top">
      <div *ngIf="type === 'ROOM'" class="text-muted d-flex align-items-center gap-2" style="font-size: 0.75rem;">
        <span class="d-flex align-items-center gap-1 text-light"><i class="bi bi-house-door"></i> {{ data.bhkType || 'BHK' }}</span>
        <span class="text-secondary">•</span>
        <span class="text-secondary">{{ data.isFurnished ? 'Furnished' : 'Unfurnished' }}</span>
      </div>
      <div *ngIf="type === 'ROOMMATE'" class="text-muted d-flex align-items-center gap-2" style="font-size: 0.75rem;">
        <span class="d-flex align-items-center gap-1 text-light"><i class="bi bi-people"></i> Looking for</span>
        <span class="text-secondary">•</span>
        <span class="fw-medium text-secondary">{{ data.lookingForGender || 'Any' }}</span>
      </div>
    </div>
  </div>
</div>